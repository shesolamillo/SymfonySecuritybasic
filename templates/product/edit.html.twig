{% extends 'base.html.twig' %}

{% block title %}Edit Product{% endblock %}



{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/product_new.css') }}">
{% endblock %}

{% block body %}
<div class="container">
    <div class="card">
        <h1>Edit Product</h1>

        <div class="product-edit-wrapper">
            {% if product.image %}
                <img src="{{ asset('uploads/' ~ product.image) }}" 
                    alt="{{ product.name }}" 
                    style="max-width:200px;">
            {% else %}
                <p>No image available</p>
            {% endif %}


            {# --- Edit Form --- #}
            {{ form_start(form, {'attr': {'enctype': 'multipart/form-data', 'id': 'edit_product_form_' ~ product.id}}) }}
                <div class="form-wrapper">

                    {{ form_row(form.name) }}

                    <div class="fs-field">
                        {{ form_label(form.category, 'Product Category', { 'label_attr': {'class': 'fs-label'} }) }}
                        {{ form_widget(form.category, { 'attr': {'class': 'fs-input', 'placeholder': 'Category'} }) }}
                        {{ form_errors(form.category) }}
                    </div>

                    {{ form_row(form.price) }}

                    {{ form_row(form.createdAt) }}

                    <div class="full-width">
                        {{ form_row(form.description) }}
                    </div>

                    <div class="full-width">
                        {{ form_row(form.image) }}
                    </div>

                </div>

                <button type="submit" class="submit-btn">{{ button_label|default('Update Product') }}</button>
                {{ form_end(form) }}


            {# --- Delete Button --- #}
            <form method="post" action="{{ path('app_product_delete', {'id': product.id}) }}" 
                  onsubmit="return confirm('Are you sure you want to delete this product?');"
                  style="margin-top:20px;">
                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ product.id) }}">
                <button type="submit" class="delete-btn">Delete Product</button>
            </form>

            <a class="back-link" href="{{ path('app_product_index') }}">‚Üê Back to Product List</a>
        </div>
    </div>
</div>

{% endblock %}